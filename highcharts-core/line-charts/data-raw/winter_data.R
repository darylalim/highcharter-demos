# Load packages ----------------------------------------------------------------
library(tibble)
library(dplyr)
library(lubridate)
library(readr)

# All series have a year of 1970 or 1971 to be compared on the same x axis -----

# Build data for Winter 2019-2020 ----------------------------------------------
winter_2019_2020 <- tibble(
  c(("1970, 10, 24"), 0),
  c(("1970, 10, 27"), 0.12),
  c(("1970, 10, 30"), 0.09),
  c(("1970, 11, 3"), 0.13),
  c(("1970, 11, 6"), 0.12),
  c(("1970, 11, 9"), 0.13),
  c(("1970, 11, 12"), 0.13),
  c(("1970, 11, 15"), 0.16),
  c(("1970, 11, 18"), 0.19),
  c(("1970, 11, 21"), 0.25),
  c(("1970, 11, 24"), 0.26),
  c(("1970, 11, 27"), 0.24),
  c(("1970, 11, 30"), 0.25),
  c(("1970, 12, 3"), 0.26),
  c(("1970, 12, 6"), 0.36),
  c(("1970, 12, 9"), 0.43),
  c(("1970, 12, 12"), 0.32),
  c(("1970, 12, 15"), 0.48),
  c(("1970, 12, 18"), 0.5),
  c(("1970, 12, 21"), 0.44),
  c(("1970, 12, 24"), 0.43),
  c(("1970, 12, 27"), 0.45),
  c(("1970, 12, 30"), 0.4),
  c(("1971, 1, 3"), 0.39),
  c(("1971, 1, 6"), 0.56),
  c(("1971, 1, 9"), 0.57),
  c(("1971, 1, 12"), 0.68),
  c(("1971, 1, 15"), 0.93),
  c(("1971, 1, 18"), 1.11),
  c(("1971, 1, 21"), 1.01),
  c(("1971, 1, 24"), 0.99),
  c(("1971, 1, 27"), 1.17),
  c(("1971, 1, 30"), 1.24),
  c(("1971, 2, 3"), 1.41),
  c(("1971, 2, 6"), 1.47),
  c(("1971, 2, 9"), 1.4),
  c(("1971, 2, 12"), 1.92),
  c(("1971, 2, 15"), 2.03),
  c(("1971, 2, 18"), 2.46),
  c(("1971, 2, 21"), 2.53),
  c(("1971, 2, 24"), 2.73),
  c(("1971, 2, 27"), 2.67),
  c(("1971, 3, 3"), 2.65),
  c(("1971, 3, 6"), 2.62),
  c(("1971, 3, 9"), 2.79),
  c(("1971, 3, 13"), 2.93),
  c(("1971, 3, 20"), 3.09),
  c(("1971, 3, 27"), 2.76),
  c(("1971, 3, 30"), 2.73),
  c(("1971, 4, 4"), 2.9),
  c(("1971, 4, 9"), 2.77),
  c(("1971, 4, 12"), 2.78),
  c(("1971, 4, 15"), 2.76),
  c(("1971, 4, 18"), 2.76),
  c(("1971, 4, 21"), 2.7),
  c(("1971, 4, 24"), 2.61),
  c(("1971, 4, 27"), 2.52),
  c(("1971, 4, 30"), 2.53),
  c(("1971, 5, 3"), 2.55),
  c(("1971, 5, 6"), 2.52),
  c(("1971, 5, 9"), 2.44),
  c(("1971, 5, 12"), 2.43),
  c(("1971, 5, 15"), 2.43),
  c(("1971, 5, 18"), 2.48),
  c(("1971, 5, 21"), 2.41),
  c(("1971, 5, 24"), 2.16),
  c(("1971, 5, 27"), 2.01),
  c(("1971, 5, 30"), 1.88),
  c(("1971, 6, 2"), 1.62),
  c(("1971, 6, 6"), 1.43),
  c(("1971, 6, 9"), 1.3),
  c(("1971, 6, 12"), 1.11),
  c(("1971, 6, 15"), 0.84),
  c(("1971, 6, 18"), 0.54),
  c(("1971, 6, 21"), 0.19),
  c(("1971, 6, 23"), 0)
) %>% 
  t() %>% 
  as_tibble() %>% 
  rename(
    date = V1,
    snow_depth_m = V2
  ) %>% 
  mutate(
    date = ymd(date),
    snow_depth_m = as.numeric(snow_depth_m)
  )

# Build data for Winter 2020-2021 ----------------------------------------------
winter_2020_2021 <- tibble(
  c(("1970, 11, 14"), 0),
  c(("1970, 12, 6"), 0.35),
  c(("1970, 12, 13"), 0.35),
  c(("1970, 12, 20"), 0.33),
  c(("1970, 12, 30"), 0.53),
  c(("1971, 1, 13"), 0.62),
  c(("1971, 1, 20"), 0.6),
  c(("1971, 2, 2"), 0.69),
  c(("1971, 2, 18"), 0.67),
  c(("1971, 2, 21"), 0.65),
  c(("1971, 2, 24"), 0.66),
  c(("1971, 2, 27"), 0.66),
  c(("1971, 3, 3"), 0.61),
  c(("1971, 3, 6"), 0.6),
  c(("1971, 3, 9"), 0.69),
  c(("1971, 3, 12"), 0.66),
  c(("1971, 3, 15"), 0.75),
  c(("1971, 3, 18"), 0.76),
  c(("1971, 3, 21"), 0.75),
  c(("1971, 3, 24"), 0.69),
  c(("1971, 3, 27"), 0.82),
  c(("1971, 3, 30"), 0.86),
  c(("1971, 4, 3"), 0.81),
  c(("1971, 4, 6"), 1),
  c(("1971, 4, 9"), 1.15),
  c(("1971, 4, 10"), 1.35),
  c(("1971, 4, 12"), 1.26),
  c(("1971, 4, 15"), 1.18),
  c(("1971, 4, 18"), 1.14),
  c(("1971, 4, 21"), 1.04),
  c(("1971, 4, 24"), 1.06),
  c(("1971, 4, 27"), 1.05),
  c(("1971, 4, 30"), 1.03),
  c(("1971, 5, 3"), 1.01),
  c(("1971, 5, 6"), 0.98),
  c(("1971, 5, 9"), 0.94),
  c(("1971, 5, 12"), 0.8),
  c(("1971, 5, 15"), 0.61),
  c(("1971, 5, 18"), 0.43),
  c(("1971, 5, 21"), 0.29),
  c(("1971, 5, 24"), 0.1),
  c(("1971, 5, 26"), 0)
) %>% 
  t() %>% 
  as_tibble() %>% 
  rename(
    date = V1,
    snow_depth_m = V2
  ) %>% 
  mutate(
    date = ymd(date),
    snow_depth_m = as.numeric(snow_depth_m)
  )

# Demo data for Winter 2021-2022 -----------------------------------------------
winter_2021_2022 <- tibble(
  c(("1970, 11, 5"), 0),
  c(("1970, 11, 12"), 0.1),
  c(("1970, 11, 21"), 0.15),
  c(("1970, 11, 22"), 0.19),
  c(("1970, 11, 27"), 0.17),
  c(("1970, 11, 30"), 0.27),
  c(("1970, 12, 2"), 0.25),
  c(("1970, 12, 4"), 0.27),
  c(("1970, 12, 5"), 0.26),
  c(("1970, 12, 6"), 0.25),
  c(("1970, 12, 7"), 0.26),
  c(("1970, 12, 8"), 0.26),
  c(("1970, 12, 9"), 0.25),
  c(("1970, 12, 10"), 0.25),
  c(("1970, 12, 11"), 0.25),
  c(("1970, 12, 12"), 0.26),
  c(("1970, 12, 22"), 0.22),
  c(("1970, 12, 23"), 0.22),
  c(("1970, 12, 24"), 0.22),
  c(("1970, 12, 25"), 0.24),
  c(("1970, 12, 26"), 0.24),
  c(("1970, 12, 27"), 0.24),
  c(("1970, 12, 28"), 0.24),
  c(("1970, 12, 29"), 0.24),
  c(("1970, 12, 30"), 0.22),
  c(("1970, 12, 31"), 0.18),
  c(("1971, 1, 1"), 0.17),
  c(("1971, 1, 2"), 0.23),
  c(("1971, 1, 9"), 0.5),
  c(("1971, 1, 10"), 0.5),
  c(("1971, 1, 11"), 0.53),
  c(("1971, 1, 12"), 0.48),
  c(("1971, 1, 13"), 0.4),
  c(("1971, 1, 17"), 0.36),
  c(("1971, 1, 22"), 0.69),
  c(("1971, 1, 23"), 0.62),
  c(("1971, 1, 29"), 0.72),
  c(("1971, 2, 2"), 0.95),
  c(("1971, 2, 10"), 1.73),
  c(("1971, 2, 15"), 1.76),
  c(("1971, 2, 26"), 2.18),
  c(("1971, 3, 2"), 2.22),
  c(("1971, 3, 6"), 2.13),
  c(("1971, 3, 8"), 2.11),
  c(("1971, 3, 9"), 2.12),
  c(("1971, 3, 10"), 2.11),
  c(("1971, 3, 11"), 2.09),
  c(("1971, 3, 12"), 2.08),
  c(("1971, 3, 13"), 2.08),
  c(("1971, 3, 14"), 2.07),
  c(("1971, 3, 15"), 2.08),
  c(("1971, 3, 17"), 2.12),
  c(("1971, 3, 18"), 2.19),
  c(("1971, 3, 21"), 2.11),
  c(("1971, 3, 24"), 2.1),
  c(("1971, 3, 27"), 1.89),
  c(("1971, 3, 30"), 1.92),
  c(("1971, 4, 3"), 1.9),
  c(("1971, 4, 6"), 1.95),
  c(("1971, 4, 9"), 1.94),
  c(("1971, 4, 12"), 2),
  c(("1971, 4, 15"), 1.9),
  c(("1971, 4, 18"), 1.84),
  c(("1971, 4, 21"), 1.75),
  c(("1971, 4, 24"), 1.69),
  c(("1971, 4, 27"), 1.64),
  c(("1971, 4, 30"), 1.64),
  c(("1971, 5, 3"), 1.58),
  c(("1971, 5, 6"), 1.52),
  c(("1971, 5, 9"), 1.43),
  c(("1971, 5, 12"), 1.42),
  c(("1971, 5, 15"), 1.37),
  c(("1971, 5, 18"), 1.26),
  c(("1971, 5, 21"), 1.11),
  c(("1971, 5, 24"), 0.92),
  c(("1971, 5, 27"), 0.75),
  c(("1971, 5, 30"), 0.55),
  c(("1971, 6, 3"), 0.35),
  c(("1971, 6, 6"), 0.21),
  c(("1971, 6, 9"), 0)
) %>% 
  t() %>% 
  as_tibble() %>% 
  rename(
    date = V1,
    snow_depth_m = V2
  ) %>% 
  mutate(
    date = ymd(date),
    snow_depth_m = as.numeric(snow_depth_m)
  )

# Write CSV files --------------------------------------------------------------
write_csv(winter_2019_2020, "highcharts-core/line-charts/data/winter_2019_2020.csv")
write_csv(winter_2020_2021, "highcharts-core/line-charts/data/winter_2020_2021.csv")
write_csv(winter_2021_2022, "highcharts-core/line-charts/data/winter_2021_2022.csv")
